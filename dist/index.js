"use strict";Object.defineProperty(exports,"__esModule",{value:!0});class Factory{constructor(t){this._builder=t,this._stateNames=new Set(["_default"])}state(t){if(this._builder.hasDefinition(t))return this._stateNames.add(t),this;throw new Error(`State with name "${t}" is not defined`)}create(t=1,e,i={}){var{forceArray:i=!1}=i,e=(e&&(this._builder.defineState("_override",e),this.state("_override")),Array.from({length:t}).map(()=>Array.from(this._stateNames).reduce((t,e)=>{e=this._builder.getDefinition(e);return e?Object.assign(Object.assign({},t),e()):t},{})));return 1!==t||i?e:e[0]}}class FactoryBuilder{constructor(t){this._definitions=new Map,this._definitions.set("_default",t instanceof Function?t:()=>t)}defineState(t,e){return this._definitions.set(t,e),this}getDefinition(t){return this._definitions.get(t)}hasDefinition(t){return this._definitions.has(t)}get(){return new Factory(this)}}function defineFactory(t){return new FactoryBuilder(t)}exports.defineFactory=defineFactory;
